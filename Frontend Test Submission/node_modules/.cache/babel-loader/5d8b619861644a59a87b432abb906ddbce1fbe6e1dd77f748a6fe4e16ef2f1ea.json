{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Documents/Computer Science/Web dev/22BTRCN193/Frontend Test Submission/src/pages/ShortenerPage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { Button, Grid } from \"@mui/material\";\nimport UrlForm from \"../components/UrlForm\";\nimport UrlCard from \"../components/UrlCard\";\nimport { createShortUrl, startMonitoring, getMonitoringStats } from \"../services/api\";\nimport { Log } from \"logging-middleware\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ShortenerPage() {\n  _s();\n  const [urls, setUrls] = useState([{\n    url: \"\",\n    validity: \"\",\n    shortcode: \"\"\n  }]);\n  const [results, setResults] = useState([]);\n  const [monitoring, setMonitoring] = useState([]);\n  const handleAdd = () => {\n    if (urls.length < 5) setUrls([...urls, {\n      url: \"\",\n      validity: \"\",\n      shortcode: \"\"\n    }]);\n  };\n  const handleChange = (i, field, value) => {\n    const newUrls = [...urls];\n    newUrls[i][field] = value;\n    setUrls(newUrls);\n  };\n  const handleSubmit = async () => {\n    const res = [];\n    for (const u of urls) {\n      try {\n        const r = await createShortUrl(u);\n        res.push(r);\n        await Log(\"frontend\", \"info\", \"component\", `Short URL created: ${r.shortLink}`);\n      } catch (err) {\n        await Log(\"frontend\", \"error\", \"api\", `Failed to shorten: ${u.url}`);\n      }\n    }\n    setResults(res);\n  };\n  const handleStartMonitoring = async () => {\n    try {\n      const list = urls.map(u => u.url).filter(Boolean);\n      await startMonitoring(list);\n      await Log(\"frontend\", \"info\", \"component\", `Monitoring started for ${list.length} urls`);\n      const stats = await getMonitoringStats();\n      setMonitoring(stats.items || []);\n    } catch (err) {\n      await Log(\"frontend\", \"error\", \"api\", `Failed to start monitoring`);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Grid, {\n    container: true,\n    spacing: 2,\n    padding: 2,\n    children: [urls.map((u, i) => /*#__PURE__*/_jsxDEV(UrlForm, {\n      index: i,\n      data: u,\n      onChange: handleChange\n    }, i, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(Button, {\n      onClick: handleAdd,\n      children: \"Add URL\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      onClick: handleSubmit,\n      variant: \"contained\",\n      children: \"Shorten\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      onClick: handleStartMonitoring,\n      variant: \"outlined\",\n      children: \"Start Monitoring\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), results.map((r, i) => /*#__PURE__*/_jsxDEV(UrlCard, {\n      shortLink: r.shortLink,\n      expiry: r.expiry\n    }, `short-${i}`, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }, this)), monitoring.map((m, i) => {\n      const last = (m.history || [])[m.history.length - 1];\n      return /*#__PURE__*/_jsxDEV(UrlCard, {\n        url: m.url,\n        status: last === null || last === void 0 ? void 0 : last.status,\n        latencyMs: last === null || last === void 0 ? void 0 : last.latencyMs,\n        error: last === null || last === void 0 ? void 0 : last.error\n      }, `mon-${i}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 11\n      }, this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }, this);\n}\n_s(ShortenerPage, \"YWdoHp0QWZz4d8QNGawXk50OTfk=\");\n_c = ShortenerPage;\nvar _c;\n$RefreshReg$(_c, \"ShortenerPage\");","map":{"version":3,"names":["React","useState","Button","Grid","UrlForm","UrlCard","createShortUrl","startMonitoring","getMonitoringStats","Log","jsxDEV","_jsxDEV","ShortenerPage","_s","urls","setUrls","url","validity","shortcode","results","setResults","monitoring","setMonitoring","handleAdd","length","handleChange","i","field","value","newUrls","handleSubmit","res","u","r","push","shortLink","err","handleStartMonitoring","list","map","filter","Boolean","stats","items","container","spacing","padding","children","index","data","onChange","fileName","_jsxFileName","lineNumber","columnNumber","onClick","variant","expiry","m","last","history","status","latencyMs","error","_c","$RefreshReg$"],"sources":["/Users/mac/Documents/Computer Science/Web dev/22BTRCN193/Frontend Test Submission/src/pages/ShortenerPage.tsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Button, Grid, Typography } from \"@mui/material\";\nimport UrlForm from \"../components/UrlForm\";\nimport UrlCard from \"../components/UrlCard\";\nimport { createShortUrl, startMonitoring, getMonitoringStats } from \"../services/api\";\nimport { Log } from \"logging-middleware\";\n\nexport default function ShortenerPage() {\n  const [urls, setUrls] = useState([{ url: \"\", validity: \"\", shortcode: \"\" }]);\n  const [results, setResults] = useState<any[]>([]);\n  const [monitoring, setMonitoring] = useState<any[]>([]);\n\n  const handleAdd = () => {\n    if (urls.length < 5) setUrls([...urls, { url: \"\", validity: \"\", shortcode: \"\" }]);\n  };\n\n  const handleChange = (i: number, field: string, value: string) => {\n    const newUrls = [...urls];\n    (newUrls[i] as any)[field] = value;\n    setUrls(newUrls);\n  };\n\n  const handleSubmit = async () => {\n    const res: any[] = [];\n    for (const u of urls) {\n      try {\n        const r = await createShortUrl(u);\n        res.push(r);\n        await Log(\"frontend\", \"info\", \"component\", `Short URL created: ${r.shortLink}`);\n      } catch (err: any) {\n        await Log(\"frontend\", \"error\", \"api\", `Failed to shorten: ${u.url}`);\n      }\n    }\n    setResults(res);\n  };\n\n  const handleStartMonitoring = async () => {\n    try {\n      const list = urls.map((u) => u.url).filter(Boolean);\n      await startMonitoring(list);\n      await Log(\"frontend\", \"info\", \"component\", `Monitoring started for ${list.length} urls`);\n      const stats = await getMonitoringStats();\n      setMonitoring(stats.items || []);\n    } catch (err: any) {\n      await Log(\"frontend\", \"error\", \"api\", `Failed to start monitoring`);\n    }\n  };\n\n  return (\n    <Grid container spacing={2} padding={2}>\n      {urls.map((u, i) => (\n        <UrlForm key={i} index={i} data={u} onChange={handleChange} />\n      ))}\n      <Button onClick={handleAdd}>Add URL</Button>\n      <Button onClick={handleSubmit} variant=\"contained\">Shorten</Button>\n      <Button onClick={handleStartMonitoring} variant=\"outlined\">Start Monitoring</Button>\n\n      {results.map((r, i) => (\n        <UrlCard key={`short-${i}`} shortLink={r.shortLink} expiry={r.expiry} />\n      ))}\n\n      {monitoring.map((m: any, i: number) => {\n        const last = (m.history || [])[m.history.length - 1];\n        return (\n          <UrlCard\n            key={`mon-${i}`}\n            url={m.url}\n            status={last?.status}\n            latencyMs={last?.latencyMs}\n            error={last?.error}\n          />\n        );\n      })}\n    </Grid>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}